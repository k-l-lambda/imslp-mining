# IMSLP Mining


## Prerequisites

Config file in project root direcotry: `config.local.yaml`

+	*pyclients*, the OMR python clients.


## Data Pipeline

```shell
# setup work folders and create base.yaml
yarn ts ./tools/dataInit.ts

# copy midi files
yarn ts ./tools/copyMIDI.ts

# Audio
##	split audio files and remove silent audio
yarn ts ./tools/audioSplitter.ts
python ./spectrumPlotter.py

##	piano audio to MIDI
python ./pianoTranscriber.py

# sheet music
## 	page location
yarn ts ./tools/pageReader.ts

##	vison
yarn ts ./tools/ocr.ts
yarn ts ./tools/scoreInit.ts
yarn ts ./tools/scoreVision.ts

##	regulation
yarn ts ./tools/spartitoConstructor.ts

```


## Maestro Pipeline

```shell
# save MIDI hashes in midi-hash.yaml
yarn ts ./tools/midiIndexing.ts

yarn ts ./tools/maestroIndexer.ts
```


## [Maestro v3](https://magenta.tensorflow.org/datasets/maestro#v300) Works IDs

> 377,948,1160,1221,1521,1555,1798,2006,2458,2522,2523,2526,2667,2961,3215,3221,3222,3223,3224,3226,3235,3242,3247,3252,3254,3260,3710,3711,3713,3714,3715,3868,3872,3878,3879,3899,4130,4135,4647,5229,5277,5279,5281,5808,5811,5815,5816,5817,5818,5819,5820,5821,5822,5825,5827,5828,5830,5836,5837,5839,5840,5841,5842,5843,5844,5845,5846,5849,5851,5852,5853,5855,5856,6482,6509,6526,6579,6971,7124,7130,7131,7132,7386,7387,7388,7389,7391,7392,7393,7394,7604,10547,10826,10851,10968,10969,10970,10971,10976,10977,10987,10988,11005,11037,11043,11080,11083,11309,11441,11812,13193,13263,13627,13637,13763,13766,13772,13773,13977,14179,15391,16496,16544,16915,16949,16950,16951,16954,17005,17007,17316,17320,17323,17324,17330,17349,17351,17352,17354,17356,17357,17358,17359,17360,17361,17362,17363,17364,17365,17366,17367,17368,17369,17370,17371,17372,17373,17374,17375,17376,17377,17378,17379,17380,17381,17382,17383,17384,17385,17386,17387,17388,17389,17390,17391,17392,17393,17394,17395,17396,17397,17398,17399,17400,17401,17402,17403,17404,17405,17406,17407,17408,17409,17410,17411,17412,17413,17414,17415,17512,17519,17520,17522,17523,17572,17586,17630,17633,17646,17647,17686,17771,17902,17922,18610,18611,18614,19358,19361,19363,19365,19366,19514,19562,19580,20224,20370,20433,20607,20938,20953,20954,21027,21028,21029,21042,21043,21045,21046,21051,21055,21056,21058,21059,21060,21061,21064,21065,21066,21067,21071,21448,21523,21945,22082,22176,22182,22183,22184,22208,22815,22816,23379,23383,27356,27870,27872,27875,27876,27877,27894,27896,27973,27974,27976,27977,27979,27980,27981,27982,27983,27984,28002,28005,28006,28023,28056,28057,28059,28086,28383,28388,29589,30223,31002,31068,31395,31563,31822,32232,32286,32490,32608,32609,32613,32614,33832,33964,33965,34199,34899,35712,39611,39921,39929,39930,39949,39953,39965,39966,39975,39992,40171,40210,40211,40212,40223,40232,40260,40294,40295,40296,40298,40299,40645,40686,42037,42038,42039,42042,42047,42049,42052,42054,42070,42972,44236,44342,44349,45243,45277,45278,45284,45285,45291,45294,46526,46527,46537,46538,46539,46548,46549,48434,49059,54157,54942,54950,55001,55022,55258,56683,56691,57545,57548,57550,57551,60341,60635,61845,61900,63288,64183,65956,65958,65960,65961,66274,67143,67152,67160,67170,67175,67711,69449,70437,71465,71508,71509,71510,72319,72728,73051,74402,74418,74419,74955,76212,76781,77152,77171,77172,77173,85448,85802,86426,87097,87102,91896,91899,91900,91901,91902,91903,91904,91905,91906,91907,91908,91909,93774,93825,93826,93827,93828,93829,93830,93831,93869,93870,93872,93949,93950,93951,93952,94007,94008,94009,94010,94011,94012,94013,94030,94031,94032,94033,94034,94035,94036,94092,94203,94209,94210,94211,94237,94301,95850,96597,96632,96642,97482,98882,99066,100010,103910,103936,104704,105133,105134,105135,105136,105137,105138,105139,105140,105141,105142,105143,108662,108663,108664,108666,108671,108672,108673,108674,108675,108677,108842,108935,109042,110634,111002,111512,111513,111514,112451,113566,115503,118236,118245,118273,118274,118282,118283,118288,118307,118310,120921,121312,121314,124267,124283,124489,124506,127105,128751,128788,130471,135499,135515,135530,135535,135546,135561,135608,135616,135634,135660,135709,135716,135731,135735,140237,144481,145850,145886,145906,145907,148370,148376,148379,161795,165289,165884,165885,167742,169023,172565,172979,172985,173479,177707,177972,177981,177987,178610,178611,178612
